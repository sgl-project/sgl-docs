---
title: "Development Guide Using Docker"
---

## Setup VSCode on a Remote Host

<Note>
This step is optional — you can skip it if you plan to run the SGLang dev container locally.
</Note>

<Steps>
  <Step title="Download and run the VS Code CLI on the remote host">
    Download `code` from the [VS Code download page](https://code.visualstudio.com/download) and run `code tunnel` in a shell.

    <CodeGroup>
    ```bash Example
    wget https://vscode.download.prss.microsoft.com/dbazure/download/stable/fabdb6a30b49f79a7aba0f2ad9df9b399473380f/vscode_cli_alpine_x64_cli.tar.gz
    tar xf vscode_cli_alpine_x64_cli.tar.gz

    # https://code.visualstudio.com/docs/remote/tunnels
    ./code tunnel
    ```
    </CodeGroup>
  </Step>

  <Step title="Connect from your local machine">
    In your local machine, press `F1` in VSCode and choose **"Remote Tunnels: Connect to Tunnel"**.
  </Step>
</Steps>

---

## Setup Docker Container

### Option 1. Use the default dev container automatically from VSCode

There is a `.devcontainer` folder in the SGLang repository root folder to allow VSCode to automatically start up within a dev container. You can read more about this in the VSCode official document [Developing inside a Container](https://code.visualstudio.com/docs/devcontainers/containers).

<Frame>
  <img src="https://github.com/user-attachments/assets/6a245da8-2d4d-4ea8-8db1-5a05b3a66f6d" alt="VSCode Dev Container Architecture" />
</Frame>

*Figure 1: Diagram from VSCode official documentation [Developing inside a Container](https://code.visualstudio.com/docs/devcontainers/containers).*

<Steps>
  <Step title="Install the VS Code Dev Container extension">
    Start Visual Studio Code and install the [VSCode dev container extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers).
  </Step>

  <Step title="Open the folder in a container">
    Press `F1`, type and choose **"Dev Container: Open Folder in Container"**.
  </Step>

  <Step title="Enter the SGLang repo path">
    Input the `sglang` local repo path on your machine and press Enter.

    The first time you open it in a dev container might take longer due to Docker pull and build. Once successful, your status bar at the bottom left will show that you are inside a dev container:

    <Frame>
      <img src="https://github.com/user-attachments/assets/650bba0b-c023-455f-91f9-ab357340106b" alt="VSCode Dev Container Status Bar" />
    </Frame>

    Now when you run `sglang.launch_server` in the VSCode terminal or start debugging using `F5`, the SGLang server will start in the dev container with all your local changes applied automatically:

    <Frame>
      <img src="https://github.com/user-attachments/assets/748c85ba-7f8c-465e-8599-2bf7a8dde895" alt="SGLang Server Running in Dev Container" />
    </Frame>
  </Step>
</Steps>

---

### Option 2. Start up containers manually (advanced)

The following startup command is an example for internal development by the SGLang team. You can **modify or add directory mappings as needed**, especially for model weight downloads, to prevent repeated downloads by different Docker containers.

<Warning>
**Note on RDMA**

1. `--network host` and `--privileged` are required by RDMA. If you don't need RDMA, you can remove them — but keeping them does not cause harm. Both flags are enabled by default in the commands below.
2. You may need to set `NCCL_IB_GID_INDEX` if you are using RoCE, for example: `export NCCL_IB_GID_INDEX=3`.
</Warning>

<Steps>
  <Step title="Start the container">
    <CodeGroup>
    ```bash Start Container
    # Change the name to yours
    docker run -itd --shm-size 32g --gpus all -v <volumes-to-mount> --ipc=host --network=host --privileged --name sglang_dev lmsysorg/sglang:dev /bin/zsh
    docker exec -it sglang_dev /bin/zsh
    ```
    </CodeGroup>

    Some useful volumes to mount:

    1. **Hugging Face model cache** — mounting the model cache avoids re-downloading every time Docker restarts. Default location on Linux: `~/.cache/huggingface/`.
    2. **SGLang repository** — code changes in the local SGLang repository will be automatically synced to the devcontainer.
  </Step>

  <Step title="Choose a volume mounting strategy">
    **Example 1:** Mount local cache folder only (no SGLang repo). Use this when you prefer to manually transfer local code changes to the devcontainer.

    <CodeGroup>
    ```bash Mount Cache Only
    docker run -itd --shm-size 32g --gpus all \
        -v /opt/dlami/nvme/.cache:/root/.cache \
        --ipc=host --network=host --privileged \
        --name sglang_dev lmsysorg/sglang:dev /bin/zsh
    docker exec -it sglang_dev /bin/zsh
    ```
    </CodeGroup>

    **Example 2:** Mount both Hugging Face cache and local SGLang repo. Local code changes are automatically synced since SGLang is installed in editable mode in the dev image.

    <CodeGroup>
    ```bash Mount Cache and Repo
    docker run -itd --shm-size 32g --gpus all \
        -v $HOME/.cache/huggingface/:/root/.cache/huggingface \
        -v $HOME/src/sglang:/sgl-workspace/sglang \
        --ipc=host --network=host --privileged \
        --name sglang_dev lmsysorg/sglang:dev /bin/zsh
    docker exec -it sglang_dev /bin/zsh
    ```
    </CodeGroup>
  </Step>
</Steps>

---

## Debug SGLang with VSCode Debugger

<Steps>
  <Step title="Open launch.json in VSCode">
    Create the file if it does not exist.
  </Step>

  <Step title="Add the debug configuration">
    Add the following config and save. You can edit the script as needed to apply different parameters or debug a different program (e.g. a benchmark script).

    <CodeGroup>
    ```json launch.json
    {
      "version": "0.2.0",
      "configurations": [
        {
          "name": "Python Debugger: launch_server",
          "type": "debugpy",
          "request": "launch",
          "module": "sglang.launch_server",
          "console": "integratedTerminal",
          "args": [
            "--model-path", "meta-llama/Llama-3.2-1B",
            "--host", "0.0.0.0",
            "--port", "30000",
            "--trust-remote-code"
          ],
          "justMyCode": false
        }
      ]
    }
    ```
    </CodeGroup>
  </Step>

  <Step title="Start the debugger">
    Press `F5` to start. The VSCode debugger will pause at breakpoints even when the program is running on a remote SSH/Tunnel host inside a dev container.
  </Step>
</Steps>

---

## Profile

<CodeGroup>
```bash Profile Example
# Change batch size, input, output and add --disable-cuda-graph (for easier analysis)
# e.g. DeepSeek V3
nsys profile -o deepseek_v3 python3 -m sglang.bench_one_batch \
    --batch-size 1 \
    --input 128 \
    --output 256 \
    --model deepseek-ai/DeepSeek-V3 \
    --trust-remote-code \
    --tp 8 \
    --disable-cuda-graph
```
</CodeGroup>

---

## Evaluation

<CodeGroup>
```bash Evaluation Example
# e.g. gsm8k 8 shot
python3 benchmark/gsm8k/bench_sglang.py --num-questions 2000 --parallel 2000 --num-shots 8
```
</CodeGroup>